{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="/static/css/profile.css">
{% endblock %}

{% block title %}Профиль - Crypto Portfolio{% endblock %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        {% if user_data.photo_url %}
            <img src="{{ user_data.photo_url }}" alt="Profile" class="profile-avatar">
        {% else %}
            <div class="default-avatar" style="width: 80px; height: 80px; font-size: 2rem;">
                {{ user_data.first_name[0] }}
            </div>
        {% endif %}
        <div class="profile-info">
            <h2>{{ user_data.first_name }} {{ user_data.last_name or '' }}</h2>
            <p>@{{ user_data.username or 'username не указан' }}</p>
            {% if db_user and db_user.created_at %}
            <p style="color: #00c6ff; font-size: 0.9rem; margin-top: 0.5rem;">
                ✅ В базе данных с {{ db_user.created_at.strftime('%d.%m.%Y') }}
            </p>
            {% endif %}
        </div>
    </div>

    <div class="profile-details">
        <div class="detail-item">
            <span>ID в Telegram:</span>
            <span>{{ user_data.id }}</span>
        </div>
        {% if db_user %}
        <div class="detail-item">
            <span>ID в базе:</span>
            <span>{{ db_user.id }}</span>
        </div>
        {% endif %}
        <div class="detail-item">
            <span>Имя:</span>
            <span>{{ user_data.first_name }}</span>
        </div>
        {% if user_data.last_name %}
        <div class="detail-item">
            <span>Фамилия:</span>
            <span>{{ user_data.last_name }}</span>
        </div>
        {% endif %}
        {% if user_data.username %}
        <div class="detail-item">
            <span>Username:</span>
            <span>@{{ user_data.username }}</span>
        </div>
        {% endif %}
        {% if db_user and db_user.created_at %}
        <div class="detail-item">
            <span>Зарегистрирован:</span>
            <span>{{ db_user.created_at.strftime('%d.%m.%Y %H:%M') }}</span>
        </div>
        {% endif %}
        {% if db_user and db_user.updated_at %}
        <div class="detail-item">
            <span>Обновлен:</span>
            <span>{{ db_user.updated_at.strftime('%d.%m.%Y %H:%M') }}</span>
        </div>
        {% endif %}
    </div>

    <a href="/auth/logout" class="logout-btn">Выйти</a>
</div>
{% endblock %}