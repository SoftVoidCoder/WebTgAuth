{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="/static/css/profile.css">
<link rel="stylesheet" href="/static/css/music.css">
{% endblock %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å - Music App{% endblock %}

{% block content %}
<!-- –ö–ù–û–ü–ö–ê –°–õ–£–®–ê–¢–¨ –°–í–ï–†–•–£ -->
<div style="text-align: center; margin-top: 1rem;">
    <button class="listen-all-btn" onclick="playAllLikedTracks()">
        üéµ –°–ª—É—à–∞—Ç—å –≤—Å–µ —Ç—Ä–µ–∫–∏
    </button>
</div>

<div class="profile-container">
    <!-- –®–ê–ü–ö–ê –ü–†–û–§–ò–õ–Ø –° –ê–í–ê–¢–ê–†–ö–û–ô -->
    <div class="profile-header">
        <div class="avatar-section">
            {% if user_data.photo_url %}
                <img src="{{ user_data.photo_url }}" alt="Profile" class="profile-avatar">
            {% else %}
                <div class="default-avatar">
                    {{ user_data.first_name[0] }}
                </div>
            {% endif %}
        </div>
        <div class="profile-info">
            <h2>{{ user_data.first_name }} {{ user_data.last_name or '' }}</h2>
            <p class="username">@{{ user_data.username or 'username –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
        </div>
    </div>

    <!-- –†–ê–ó–î–ï–õ –° –õ–ê–ô–ö–ù–£–¢–´–ú–ò –¢–†–ï–ö–ê–ú–ò -->
    <div class="liked-tracks-section" id="liked">
        <h3 class="section-title">‚ù§Ô∏è –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è</h3>
        
        <div class="tracks-list" id="likedTracksList">
            <!-- –¢—Ä–µ–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
        
        <div class="no-tracks" id="noTracksMessage" style="display: none;">
            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏—Ö—Å—è —Ç—Ä–µ–∫–æ–≤</p>
            <p class="hint">–ù–∞–∂–∏–º–∞–π—Ç–µ ‚ù§Ô∏è –Ω–∞ —Ç—Ä–µ–∫–∞—Ö —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö —Å—é–¥–∞</p>
        </div>
    </div>

    <a href="/auth/logout" class="logout-btn">–í—ã–π—Ç–∏</a>
</div>

<!-- –ö–û–ú–ü–ê–ö–¢–ù–´–ô –ü–õ–ï–ï–† -->
<div class="compact-player" id="compactPlayer" style="display: none;">
    <div class="compact-player-main">
        <div class="compact-track-info">
            <div class="compact-cover" id="compactCover">
                <div class="compact-placeholder">üéµ</div>
            </div>
            <div class="compact-details">
                <div class="compact-title" id="compactTitle">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞</div>
                <div class="compact-artist" id="compactArtist">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</div>
            </div>
        </div>
        
        <div class="compact-controls">
            <button class="compact-btn prev-btn" onclick="playPrevLikedTrack()" title="–ü—Ä–µ–¥—ã–¥—É—â–∏–π">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                </svg>
            </button>
            
            <button class="compact-btn play-btn" id="compactPlayBtn" onclick="toggleCompactPlayPause()" title="–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏/–ü–∞—É–∑–∞">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" id="compactPlayIcon">
                    <path d="M8 5v14l11-7z"/>
                </svg>
            </button>
            
            <button class="compact-btn next-btn" onclick="playNextLikedTrack()" title="–°–ª–µ–¥—É—é—â–∏–π">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                </svg>
            </button>
        </div>
        
        <button class="compact-like-btn" id="compactLikeBtn" onclick="toggleCompactLike()" title="–£–±—Ä–∞—Ç—å –∏–∑ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏—Ö—Å—è">
            ‚ù§Ô∏è
        </button>
    </div>
    
    <audio class="audio-element" id="compactAudioElement">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç—ã.
    </audio>
</div>

<script src="/static/js/profile.js"></script>

{% endblock %}