{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="/static/css/profile.css">
{% endblock %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å - {{ user_data.first_name }}{% endblock %}

{% block content %}
<div class="profile-container">
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="profile-header">
        {% if user_data.photo_url %}
            <img src="{{ user_data.photo_url }}" alt="Profile" class="profile-avatar">
        {% else %}
            <div class="default-avatar profile-avatar-large">
                {{ user_data.first_name[0] }}
            </div>
        {% endif %}
        <div class="profile-info">
            <h2>{{ user_data.first_name }} {{ user_data.last_name or '' }}</h2>
            <p class="username">@{{ user_data.username or 'username –Ω–µ —É–∫–∞–∑–∞–Ω' }}</p>
            {% if db_user and db_user.created_at %}
            <p class="registration-date">
                ‚úÖ –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å {{ db_user.created_at.strftime('%d.%m.%Y') }}
            </p>
            {% endif %}
        </div>
    </div>

    <!-- –ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏ -->
    <section class="gifts-section">
        <h3 class="section-title">üéÅ –ú–æ–∏ –ø–æ–¥–∞—Ä–∫–∏</h3>
        
        {% if user_gifts %}
            <div class="gifts-grid">
                {% for gift in user_gifts %}
                <div class="gift-card">
                    {% if gift.image_url %}
                        <img src="{{ gift.image_url }}" alt="{{ gift.title }}" class="gift-image">
                    {% else %}
                        <div class="gift-image-placeholder">üéÅ</div>
                    {% endif %}
                    <div class="gift-info">
                        <h4>{{ gift.title }}</h4>
                        <p class="gift-description">{{ gift.description or '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç' }}</p>
                        <div class="gift-meta">
                            <span class="gift-price">{{ gift.price }} ‚ÇΩ</span>
                            <span class="gift-category">{{ gift.category or '–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏' }}</span>
                        </div>
                        <span class="gift-status {{ gift.status }}">{{ gift.status }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-gifts">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ–¥–∞—Ä–∫–æ–≤</p>
                <p class="hint">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø—Ä–æ–¥–∞–≤–∞—Ç—å</p>
            </div>
        {% endif %}
    </section>

    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="profile-details">
        <div class="detail-item">
            <span>ID –≤ Telegram:</span>
            <span>{{ user_data.id }}</span>
        </div>
        {% if db_user %}
        <div class="detail-item">
            <span>ID –≤ –±–∞–∑–µ:</span>
            <span>{{ db_user.id }}</span>
        </div>
        {% endif %}
        <div class="detail-item">
            <span>–ò–º—è:</span>
            <span>{{ user_data.first_name }}</span>
        </div>
        {% if user_data.last_name %}
        <div class="detail-item">
            <span>–§–∞–º–∏–ª–∏—è:</span>
            <span>{{ user_data.last_name }}</span>
        </div>
        {% endif %}
        {% if user_data.username %}
        <div class="detail-item">
            <span>Username:</span>
            <span>@{{ user_data.username }}</span>
        </div>
        {% endif %}
        {% if db_user and db_user.created_at %}
        <div class="detail-item">
            <span>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:</span>
            <span>{{ db_user.created_at.strftime('%d.%m.%Y %H:%M') }}</span>
        </div>
        {% endif %}
    </div>

    <a href="/auth/logout" class="logout-btn">–í—ã–π—Ç–∏</a>
</div>
{% endblock %}